<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/output.css' %}">
    <title>Lista de Conversas</title>
  </head>
  <body>
    <h1>Bem-vindo à Lista de Conversas</h1>
    <p>Aqui estão suas conversas recentes:</p>
  </body>

  <script>
    // Função para redirecionar para a página de conversa
    function redirectToConversation(conversationId) {
      window.location.href = `/conversations/view/${conversationId}/`;
    }

    async function carregarConversas() {
      try {
        const response = await fetch("/conversations/");
        const conversations = await response.json();
        const body = document.body;
        conversations.forEach((conversation) => {
          const button = document.createElement("button");
          button.innerText = conversation.id;
          button.onclick = () => redirectToConversation(conversation.id);
          body.appendChild(button);
        });
      } catch (error) {
        console.error("Erro ao buscar conversas:", error);
      }
    }
    carregarConversas();
  </script>
</html>
